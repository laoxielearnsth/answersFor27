# 一个物体在canvas上逐步下落，怎样才能避免整画布重绘？

这道题初看非常简单，就是实现一个物体下坠，同时要保证不整个画布重绘。那我把物体的上一步位置记录下来，然后每次清除上一次的状态。

```javascript
// 大概是下面这个样子
class Box { 
    constructor(){}
    init(){}
    fall(){}
    clearPre(){}
    draw(){}
}
```

这看起来非常容易，让我们尝试让事情变得稍微复杂一点。如果，这个物体是个不规则形状的物体，应该如何避免整个画布的重绘。

再进一步，目前我们都是在简单，单调背景下进行，如果背景是个复杂图案呢？我们应该怎么做？

最后，如果我们同时有多个物体一起下落呢？

可以发现，对于物体的增多，性能有一定的下降，对比整块画布重绘，可以发现，此时，整块重绘效率更好。

综上，对于不同的情况，应该选择对应的解决方案，以达到性能优化的目的。